!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,(()=>(()=>{"use strict";var e={1058:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0;const n=r(5862),s=i(r(9176)),o=r(5562),a=r(1624),l=r(665),u=r(7837),c=r(607),d=i(r(6940)),h={startWaitTime:n.TypeValidators.Number,sdkKey:n.TypeValidators.String,pollingUri:n.TypeValidators.String,streamingUri:n.TypeValidators.String,eventsUri:n.TypeValidators.String,webSocketPingInterval:n.TypeValidators.Number,logger:n.TypeValidators.Object,store:n.TypeValidators.ObjectOrFactory,dataSynchronizer:n.TypeValidators.ObjectOrFactory,flushInterval:n.TypeValidators.Number,maxEventsInQueue:n.TypeValidators.Number,pollingInterval:n.TypeValidators.Number,offline:n.TypeValidators.Boolean,dataSyncMode:n.TypeValidators.String,bootstrapProvider:n.TypeValidators.Object,user:n.TypeValidators.User};t.defaultValues={startWaitTime:5e3,sdkKey:"",pollingUri:"",streamingUri:"",eventsUri:"",dataSyncMode:c.DataSyncModeEnum.STREAMING,sendEvents:!0,webSocketPingInterval:18e3,flushInterval:2e3,maxEventsInQueue:1e4,pollingInterval:3e4,offline:!1,store:e=>new d.default(e),bootstrapProvider:new l.NullBootstrapProvider,user:void 0},t.default=class{constructor(e={}){var r;e=e||{},this.logger=e.logger;const{errors:i,validatedOptions:l}=function(e){let r=[];const i=Object.assign({},t.defaultValues);return Object.keys(e).forEach((o=>{var a;const l=e[o],u=h[o];if(u)if(u.is(l))i[o]=l;else if("boolean"===u.getType())r.push(s.default.wrongOptionTypeBoolean(o,typeof l)),i[o]=!!l;else if(u instanceof n.NumberWithMinimum&&n.TypeValidators.Number.is(l)){const{min:e}=u;r.push(s.default.optionBelowMinimum(o,l,e)),i[o]=e}else u instanceof n.UserValidator?(r=[...r,...u.messages],i[o]=t.defaultValues[o]):(r.push(s.default.wrongOptionType(o,u.getType(),typeof l)),i[o]=t.defaultValues[o]);else null===(a=e.logger)||void 0===a||a.warn(s.default.unknownOption(o))})),{errors:r,validatedOptions:i}}(e);i.forEach((e=>{var t;null===(t=this.logger)||void 0===t||t.warn(e)})),this.user=e.user,function(e,t){var r,i,n;const{streamingUri:a,pollingUri:l,eventsUri:d}=e,h=(0,o.isNullOrUndefined)(a)||a===u.EmptyString,f=(0,o.isNullOrUndefined)(l)||l===u.EmptyString,v=(0,o.isNullOrUndefined)(d)||d===u.EmptyString;!t.offline&&(v||h&&f)&&(v&&(null===(r=t.logger)||void 0===r||r.error(s.default.partialEndpoint("eventsUri"))),t.dataSyncMode===c.DataSyncModeEnum.STREAMING&&h&&(null===(i=t.logger)||void 0===i||i.error(s.default.partialEndpoint("streamingUri"))),t.dataSyncMode===c.DataSyncModeEnum.POLLING&&f&&(null===(n=t.logger)||void 0===n||n.error(s.default.partialEndpoint("pollingUri"))))}(e,l),this.streamingUri=`${(0,a.canonicalizeUri)(l.streamingUri)}/streaming`,this.pollingUri=`${(0,a.canonicalizeUri)(l.pollingUri)}/api/public/sdk/client/latest-all`,this.eventsUri=`${(0,a.canonicalizeUri)(l.eventsUri)}/api/public/insight/track`,this.startWaitTime=l.startWaitTime,this.sdkKey=l.sdkKey,this.webSocketPingInterval=l.webSocketPingInterval,this.flushInterval=l.flushInterval,this.maxEventsInQueue=l.maxEventsInQueue,this.pollingInterval=l.pollingInterval,this.offline=l.offline,this.bootstrapProvider=l.bootstrapProvider,this.offline&&(null===(r=this.logger)||void 0===r||r.info("Offline mode enabled. No data synchronization with the FeatBit server will occur.")),this.dataSyncMode=l.dataSyncMode,n.TypeValidators.Function.is(l.dataSynchronizer)?this.dataSynchronizerFactory=l.dataSynchronizer:this.dataSynchronizerFactory=()=>l.dataSynchronizer,n.TypeValidators.Function.is(l.store)?this.storeFactory=l.store:this.storeFactory=()=>l.store}}},1731:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.valid=e,this.message=t}static fromUser(e){if(!e)return r.contextForError("No user specified");const{keyId:t,name:i}=e;if(null==t||""===t.trim())return r.contextForError("key is mandatory");const n=new r(!0);return n._user=e,n}get user(){return this._user}get keyId(){return this._user.keyId}value(e){var t,r,i,n,s;return"keyId"===e?null===(t=this._user)||void 0===t?void 0:t.keyId:"name"===e?null===(r=this._user)||void 0===r?void 0:r.name:null===(s=null===(n=null===(i=this._user)||void 0===i?void 0:i.customizedProperties)||void 0===n?void 0:n.find((t=>t.name===e)))||void 0===s?void 0:s.value}static contextForError(e){return new r(!1,e)}}t.default=r},70:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FbClientBuilder=void 0;const n=i(r(8322)),s=r(700);t.FbClientBuilder=class{constructor(e){this._options=null!=e?e:{}}build(){return new n.default(this._options)}startWaitTime(e){return this._options.startWaitTime=e,this}sdkKey(e){return this._options.sdkKey=e,this}user(e){return this._options.user=e,this}streamingUri(e){return this._options.streamingUri=e,this}pollingUri(e){return this._options.pollingUri=e,this}eventsUri(e){return this._options.eventsUri=e,this}dataSyncMode(e){return this._options.dataSyncMode=e,this}pollingInterval(e){return this._options.pollingInterval=e,this}flushInterval(e){return this._options.flushInterval=e,this}maxEventsInQueue(e){return this._options.maxEventsInQueue=e,this}logger(e){return this._options.logger=e,this}offline(e){return this._options.offline=e,this}bootstrapProvider(e){return this._options.bootstrapProvider=e,this}useJsonBootstrapProvider(e){return this._options.bootstrapProvider=new s.JsonBootstrapProvider(e),this}dataSynchronizer(e){return this._options.dataSynchronizer=e,this}}},4129:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FbClientCore=void 0;const s=n(r(1058)),o=n(r(8311)),a=n(r(4659)),l=r(7539),u=n(r(6100)),c=n(r(3148)),d=n(r(4943)),h=n(r(2093)),f=n(r(8874)),v=r(5192),p=r(7449),g=n(r(1731)),y=r(1142),m=r(8722),_=r(407),b=r(2305),O=r(7584),w=r(607),P=r(5862);var E;!function(e){e[e.Initializing=0]="Initializing",e[e.Initialized=1]="Initialized",e[e.Failed=2]="Failed"}(E||(E={})),t.FbClientCore=class{constructor(e,t,r){this.options=e,this.platform=t,this.state=E.Initializing,this.onError=r.onError,this.onFailed=r.onFailed,this.onReady=r.onReady;const{onUpdate:i,hasEventListeners:n}=r,o=new s.default(e);if(!o.sdkKey&&!o.offline)throw new Error("You must configure the client with an SDK key");if(!o.user)throw new Error("You must configure the client with a user");this.config=o,this.logger=o.logger,this.init(t,i,n)}init(e,t,r){var n,s,h;return i(this,void 0,void 0,(function*(){const i=new o.default(this.config.sdkKey,this.config,e);this.store=this.config.storeFactory(i),this.store.identify(this.config.user);const v=new a.default(this.store,r,t);if(this.evaluator=new f.default(this.store),yield this.config.bootstrapProvider.populate(this.config.user.keyId,v),this.config.offline)this.eventProcessor=new _.NullEventProcessor,this.dataSynchronizer=new m.NullDataSynchronizer,this.initSuccess();else{this.eventProcessor=new b.DefaultEventProcessor(i);const t=(0,l.createStreamListeners)(v,this.logger,{put:()=>this.initSuccess(),patch:()=>this.initSuccess()}),r=this.config.dataSyncMode===w.DataSyncModeEnum.STREAMING?new u.default(this.config.sdkKey,this.config.user,i,e.webSocket,(()=>this.store.version),t,this.config.webSocketPingInterval):new c.default(this.config,new d.default(this.config.sdkKey,this.config,this.platform.info,this.platform.requests),(()=>this.store.version),t,(e=>this.dataSourceErrorHandler(e)));this.dataSynchronizer=null!==(h=null===(s=(n=this.config).dataSynchronizerFactory)||void 0===s?void 0:s.call(n,i,this.store,v,(()=>this.initSuccess()),(e=>this.dataSourceErrorHandler(e))))&&void 0!==h?h:r}this.start()}))}identify(e){const t=new P.UserValidator;t.is(e)?(this.store.identify(e),this.dataSynchronizer.identify(e)):t.messages.forEach((e=>{var t;null===(t=this.logger)||void 0===t||t.warn(e)}))}start(){this.config.offline||(this.dataSynchronizer.start(),setTimeout((()=>{var e,t;if(!this.initialized()){const r=`FbClient failed to start successfully within ${this.config.startWaitTime} milliseconds. This error usually indicates a connection issue with FeatBit or an invalid sdkKey.Please double-check your sdkKey and streamingUri/pollingUri configuration. We will continue to initialize the FbClient, it still have a chance to get to work if it's a temporary network issue`,i=new Error(r);return this.state=E.Failed,this.rejectionReason=i,null===(e=this.initReject)||void 0===e||e.call(this,i),null===(t=this.logger)||void 0===t?void 0:t.warn(r)}}),this.config.startWaitTime))}initialized(){return this.state===E.Initialized}waitForInitialization(){return this.initializedPromise?this.initializedPromise:this.state===E.Initialized?(this.initializedPromise=Promise.resolve(this),this.initializedPromise):this.state===E.Failed?(this.initializedPromise=Promise.reject(this.rejectionReason),this.initializedPromise):(this.initializedPromise||(this.initializedPromise=new Promise(((e,t)=>{this.initResolve=e,this.initReject=t}))),this.initializedPromise)}boolVariation(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.bool).value)}boolVariationDetail(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.bool))}jsonVariation(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.json).value)}jsonVariationDetail(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.json))}numberVariation(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.number).value)}numberVariationDetail(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.number))}stringVariation(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.string).value)}stringVariationDetail(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.string))}variation(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.string).value)}variationDetail(e,t){return Promise.resolve(this.evaluateCore(e,t,y.ValueConverters.string))}getAllVariations(){var e;const t=g.default.fromUser(this.config.user);if(!t.valid){const r=new p.ClientError(`${null!==(e=t.message)&&void 0!==e?e:"User not valid;"} returning default value.`);return this.onError(r),Promise.resolve([])}const[r,i]=this.store.all(h.default.Flags),n=Object.keys(r).map((e=>{var t;const r=this.evaluator.evaluate(e);return{kind:r.kind,reason:r.reason,value:null===(t=r.value)||void 0===t?void 0:t.variation}}));return Promise.resolve(n)}close(){var e;return i(this,void 0,void 0,(function*(){yield this.eventProcessor.close(),null===(e=this.dataSynchronizer)||void 0===e||e.close(),this.store.close()}))}track(e,t){const r=new O.MetricEvent(this.config.user,e,this.platform.info.appType,null!=t?t:1);this.eventProcessor.record(r)}flush(e){return i(this,void 0,void 0,(function*(){try{return yield this.eventProcessor.flush(),null==e||e(!0),!0}catch(t){return null==e||e(!1),!1}}))}evaluateCore(e,t,r){var i,n,s;const o=g.default.fromUser(this.config.user);if(!o.valid){const e=new p.ClientError(`${null!==(i=o.message)&&void 0!==i?i:"User not valid;"} returning default value.`);return this.onError(e),{kind:v.ReasonKinds.Error,reason:e.message,value:t}}const a=this.evaluator.evaluate(e);if(a.kind===v.ReasonKinds.FlagNotFound){const e=new p.ClientError(a.reason);return this.onError(e),{kind:a.kind,reason:a.reason,value:t}}this.initialized()?this.eventProcessor.record(a.toEvalEvent(this.config.user)):null===(n=this.logger)||void 0===n||n.warn("Variation called before FeatBit client initialization completed (did you wait for the'ready' event?)");const{isSucceeded:l,value:u}=r(null===(s=a.value)||void 0===s?void 0:s.variation);return l?{kind:a.kind,reason:a.reason,value:u}:{kind:v.ReasonKinds.WrongType,reason:"type mismatch",value:t}}dataSourceErrorHandler(e){var t;const r=401===e.code?new Error("Authentication failed. Double check your SDK key."):e;this.onError(r),this.onFailed(r),this.initialized()||(this.state=E.Failed,this.rejectionReason=r,null===(t=this.initReject)||void 0===t||t.call(this,r))}initSuccess(){var e,t;this.initialized()||(this.state=E.Initialized,null===(e=this.logger)||void 0===e||e.info("FbClient started successfully."),null===(t=this.initResolve)||void 0===t||t.call(this,this),this.onReady())}}},5717:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4881:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},292:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},226:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},700:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JsonBootstrapProvider=void 0;const i=r(4426),n=r(5562);t.JsonBootstrapProvider=class{constructor(e){let t=JSON.parse(e);if(!t)throw new Error("Invalid JSON");t=t.map((e=>Object.assign(Object.assign({},e),{variationOptions:e.variationOptions||[{id:null,variation:e.variation}]})));const r=(0,i.deserializeAll)(t);this.dataSet={flags:r.flags,version:0}}populate(e,t,r){return new Promise(((i,s)=>{if((0,n.isNullOrUndefined)(this.dataSet))return i();t.init(e,this.dataSet,(()=>{i(),null==r||r()}))}))}}},665:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullBootstrapProvider=void 0,t.NullBootstrapProvider=class{constructor(){this.dataSet={flags:{},version:0}}populate(e,t,r){return new Promise(((e,t)=>{e(),null==r||r()}))}}},8317:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6399),t),n(r(700),t),n(r(665),t)},7837:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MinInt=t.EmptyString=void 0,t.EmptyString="",t.MinInt=2147483648},4659:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(3865)),s=i(r(2093));t.default=class{constructor(e,t,r){this.store=e,this.hasEventListeners=t,this.onChange=r}init(e,t,r){if(e!==this.store.user.keyId)return void(null==r||r());const i=this.hasEventListeners(),o=e=>{this.store.init(t,(()=>{Promise.resolve().then((()=>{if(i){const r=new n.default;Object.keys(t).forEach((i=>{const n=(null==e?void 0:e[i])||{},s=t[i],o=Object.assign(Object.assign({},n),s);Object.keys(o).filter((e=>this.isUpdated(n&&n[e],s&&s[e]))).reduce(((e,t)=>(e.set(i,t,!0),e)),r)})),this.sendChangeEvents(r)}})),null==r||r()}))};if(i){const[e,t]=this.store.all(s.default.Flags);o({flags:e,version:t})}else o()}upsert(e,t,r,i){if(e!==this.store.user.keyId)return void(null==i||i());const{key:s}=r,o=this.hasEventListeners(),a=e=>{this.store.upsert(t,r,(()=>{Promise.resolve().then((()=>{if(o){const i=new n.default;this.isUpdated(e,r[s])&&i.set(t.namespace,s,!0),this.sendChangeEvents(i)}})),null==i||i()}))};o?a(this.store.get(t,s)||void 0):a()}isUpdated(e,t){return!e||!t||t.version>e.version}sendChangeEvents(e){e.enumerate(((e,t)=>{e===s.default.Flags.namespace&&this.onChange(t)}))}}},3865:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.itemsByNamespace={}}get(e,t){var r;return null===(r=this.itemsByNamespace[e])||void 0===r?void 0:r[t]}set(e,t,r){e in this.itemsByNamespace||(this.itemsByNamespace[e]={}),this.itemsByNamespace[e][t]=r}remove(e,t){const r=this.itemsByNamespace[e];r&&delete r[t]}removeAll(){this.itemsByNamespace={}}enumerate(e){Object.entries(this.itemsByNamespace).forEach((([t,r])=>{Object.entries(r).forEach((([r,i])=>{e(t,r,i)}))}))}mergeFrom(e){e.enumerate(this.set.bind(this))}}},7539:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createStreamListeners=t.createPatchListener=t.createPutListener=void 0;const n=r(4426);t.createPutListener=(e,t,r=(()=>{}))=>({deserializeData:n.deserializeAll,processJson:(n,{flags:s})=>i(void 0,void 0,void 0,(function*(){const i={flags:s,version:0};null==t||t.debug("Initializing all data"),e.init(n,i,r)}))}),t.createPatchListener=(e,t,r=(()=>{}))=>({deserializeData:n.deserializePatch,processJson:(n,s)=>i(void 0,void 0,void 0,(function*(){0!==(null==s?void 0:s.length)?null==s||s.forEach((i=>{null==t||t.debug(`Updating ${i.data.key} in ${i.kind.namespace}`),e.upsert(n,i.kind,i.data,r)})):null==r||r()}))}),t.createStreamListeners=(e,r,i)=>{const n=new Map;return n.set("put",(0,t.createPutListener)(e,r,null==i?void 0:i.put)),n.set("patch",(0,t.createPatchListener)(e,r,null==i?void 0:i.patch)),n}},3758:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7539),t),n(r(4659),t),n(r(3865),t)},607:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DataSyncModeEnum=void 0,function(e){e.POLLING="polling",e.STREAMING="streaming"}(r||(t.DataSyncModeEnum=r={}))},304:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8722:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullDataSynchronizer=void 0,t.NullDataSynchronizer=class{close(){}start(){}stop(){}identify(){}}},3148:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(7449),n=r(1962),s=r(8688);t.default=class{constructor(e,t,r,i,n){this.requestor=t,this.getStoreTimestamp=r,this.listeners=i,this.errorHandler=n,this.stopped=!1,this.logger=e.logger,this.pollingInterval=e.pollingInterval,this.user=e.user}poll(){var e;if(this.stopped)return;const t=Date.now();null===(e=this.logger)||void 0===e||e.debug("Polling for feature flag and segments updates"),this.requestor.requestData(this.getStoreTimestamp(),this.user,((e,r)=>{var o,a,l,u,c,d;const h=Date.now()-t,f=Math.max(this.pollingInterval-h,0);if(null===(o=this.logger)||void 0===o||o.debug("Elapsed: %d ms, sleeping for %d ms",h,f),e){const{status:t}=e;if(t&&!(0,i.isHttpRecoverable)(t)){const r=(0,s.httpErrorMessage)(e,"polling request");return null===(a=this.logger)||void 0===a||a.error(r),void(null===(l=this.errorHandler)||void 0===l||l.call(this,new i.PollingError(r,t)))}null===(u=this.logger)||void 0===u||u.warn((0,s.httpErrorMessage)(e,"polling request","will retry"))}else if(r){const e=JSON.parse(r);if("data-sync"===e.messageType){let t;switch(e.data.eventType){case n.StreamResponseEventType.patch:t=this.listeners.get("patch");break;case n.StreamResponseEventType.full:t=this.listeners.get("put")}const{featureFlags:r,userKeyId:i}=e.data,s=null===(c=null==t?void 0:t.deserializeData)||void 0===c?void 0:c.call(t,r);null===(d=null==t?void 0:t.processJson)||void 0===d||d.call(t,i,s),this.timeoutHandle=setTimeout((()=>{this.poll()}),f)}return}this.timeoutHandle=setTimeout((()=>{this.poll()}),f)}))}identify(e){this.user=Object.assign({},e)}close(){this.stop()}start(){this.poll()}stop(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0),this.stopped=!0}}},4943:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(7449),s=r(8688);t.default=class{constructor(e,t,r,i){this.requests=i,this.headers=(0,s.defaultHeaders)(e,r),this.uri=t.pollingUri}request(e,t){return i(this,void 0,void 0,(function*(){const r=yield this.requests.fetch(e,t),i=yield r.text();return{res:r,body:i}}))}requestData(e,t,r){return i(this,void 0,void 0,(function*(){const i={method:"POST",headers:this.headers,body:JSON.stringify(t)};try{const{res:t,body:s}=yield this.request(`${this.uri}?timestamp=${null!=e?e:0}`,i);if(200!==t.status&&304!==t.status){const e=new n.StreamingError(`Unexpected status code: ${t.status}`,t.status);return r(e,void 0)}return r(void 0,304===t.status?null:s)}catch(e){return r(e,void 0)}}))}}},6100:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,r,i,n,s,o){this.getStoreTimestamp=n,this.listeners=s;const{logger:a,streamingUri:l}=r;this.logger=a,this.socket=i,this.socket.config({sdkKey:e,streamingUri:l,pingInterval:o,user:t,logger:a,getStoreTimestamp:n}),this.listeners.forEach((({deserializeData:e,processJson:t},r)=>{var i;null===(i=this.socket)||void 0===i||i.addListener(r,(i=>{var n;if(null===(n=this.logger)||void 0===n||n.debug(`Received ${r} event`),null==i?void 0:i.data){const{featureFlags:r,userKeyId:n}=i.data,s=e(r);t(n,s)}}))}))}identify(e){var t;null===(t=this.socket)||void 0===t||t.identify(e)}start(){var e;this.logConnectionStarted(),null===(e=this.socket)||void 0===e||e.connect()}logConnectionStarted(){var e;this.connectionAttemptStartTime=Date.now(),null===(e=this.logger)||void 0===e||e.info(`Stream connection attempt StartTime ${this.connectionAttemptStartTime}`)}close(){this.stop()}stop(){var e;null===(e=this.socket)||void 0===e||e.close(),this.socket=void 0}}},9999:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(607),t),n(r(304),t),n(r(450),t),n(r(8722),t),n(r(3148),t),n(r(4943),t),n(r(1962),t),n(r(6870),t),n(r(6100),t)},1962:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamResponseEventType=void 0,function(e){e.full="full",e.patch="patch"}(r||(t.StreamResponseEventType=r={}))},6870:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateConnectionToken=void 0;const r={0:"Q",1:"B",2:"W",3:"S",4:"P",5:"H",6:"D",7:"X",8:"Z",9:"U"};function i(e,t){var i="000000000000"+e;return i.slice(i.length-t).split("").map((e=>r[e])).join("")}t.generateConnectionToken=function(e){e=e.replace(/=*$/,"");const t=Date.now(),r=i(t,t.toString().length),n=Math.max(Math.floor(Math.random()*e.length),2);return`${i(n,3)}${i(r.length,2)}${e.slice(0,n)}${r}${e.slice(n)}`}},7449:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpRecoverable=t.ClientError=t.UnexpectedResponseError=t.StreamingError=t.PollingError=void 0;class r extends Error{constructor(e,t){super(e),this.status=t,this.name="FbPollingError"}}t.PollingError=r;class i extends Error{constructor(e,t){super(e),this.code=t,this.name="FbStreamingError"}}t.StreamingError=i;class n extends Error{constructor(e){super(e),this.name="FbUnexpectedResponseError"}}t.UnexpectedResponseError=n;class s extends Error{constructor(e){super(e),this.name="FbClientError"}}t.ClientError=s,t.isHttpRecoverable=function(e){return!(e>=400&&e<500)||400===e||408===e||429===e}},3100:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(5192),n=r(7584);class s{constructor(e,t,r){this.kind=e,this.value=t,this.reason=r}static flagNotFound(e){return new s(i.ReasonKinds.FlagNotFound,null,`flag not found: ${e}`)}static matched(e){return new s(i.ReasonKinds.Match,e,"target match")}toEvalEvent(e){var t,r,s;if(this.kind!==i.ReasonKinds.Match)return null;const o=null===(t=this.value)||void 0===t?void 0:t.variations.find((e=>{var t;return e.value===(null===(t=this.value)||void 0===t?void 0:t.variation)}));return new n.EvalEvent(e,null===(r=this.value)||void 0===r?void 0:r.id,o,null===(s=this.value)||void 0===s?void 0:s.sendToExperiment)}}t.default=s},8874:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(3100)),s=i(r(2093));t.default=class{constructor(e){this.store=e}evaluate(e){const t=this.store.get(s.default.Flags,e);return t?n.default.matched(t):n.default.flagNotFound(e)}}},3675:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5192:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonKinds=void 0,function(e){e.ClientNotReady="ClientNotReady",e.Match="Match",e.WrongType="WrongType",e.FlagNotFound="FlagNotFound",e.Error="Error"}(r||(t.ReasonKinds=r={}))},9653:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VariationDataType=void 0,function(e){e.string="string",e.boolean="boolean",e.number="number",e.json="json",e.empty=""}(r||(t.VariationDataType=r={}))},4228:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(9653),t)},9823:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(4228),t),n(r(3100),t),n(r(8874),t),n(r(3675),t),n(r(5099),t),n(r(5192),t)},5099:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Operator=t.OperatorTypes=void 0;const i=r(1325);var n;!function(e){e.LessThan="LessThan",e.BiggerThan="BiggerThan",e.LessEqualThan="LessEqualThan",e.BiggerEqualThan="BiggerEqualThan",e.Equal="Equal",e.NotEqual="NotEqual",e.Contains="Contains",e.NotContain="NotContain",e.StartsWith="StartsWith",e.EndsWith="EndsWith",e.MatchRegex="MatchRegex",e.NotMatchRegex="NotMatchRegex",e.IsOneOf="IsOneOf",e.NotOneOf="NotOneOf",e.IsTrue="IsTrue",e.IsFalse="IsFalse"}(n||(t.OperatorTypes=n={}));class s{constructor(e,t){this.operation=e,this.func=t}isMatch(e,t){return null!==e&&null!==t&&this.func(e,t)}static numericOperator(e,t){return(r,i)=>{const n=parseFloat(r),s=parseFloat(i);if(isNaN(n)||isNaN(s))return!1;const o=Math.sign(n-s);return o===e||o===t}}static get(e){const t=s.All.find((t=>t.operation===e));return null!=t?t:new s(e,((e,t)=>!1))}}t.Operator=s,s.LessThan=new s(n.LessThan,s.numericOperator(-1,-1)),s.LessEqualThan=new s(n.LessEqualThan,s.numericOperator(-1,0)),s.BiggerThan=new s(n.BiggerThan,s.numericOperator(1,1)),s.BiggerEqualThan=new s(n.BiggerEqualThan,s.numericOperator(1,0)),s.Equal=new s(n.Equal,((e,t)=>e===t)),s.NotEqual=new s(n.NotEqual,((e,t)=>e!==t)),s.Contains=new s(n.Contains,((e,t)=>e.includes(t))),s.NotContains=new s(n.NotContain,((e,t)=>!e.includes(t))),s.StartsWith=new s(n.StartsWith,((e,t)=>e.startsWith(t))),s.EndsWith=new s(n.EndsWith,((e,t)=>e.endsWith(t))),s.MatchRegex=new s(n.MatchRegex,((e,t)=>i.Regex.fromString(e).test(t))),s.NotMatchRegex=new s(n.NotMatchRegex,((e,t)=>!i.Regex.fromString(e).test(t))),s.IsOneOf=new s(n.IsOneOf,((e,t)=>{try{return JSON.parse(t).includes(e)}catch(e){return!1}})),s.NotOneOf=new s(n.NotOneOf,((e,t)=>{try{return!JSON.parse(t).includes(e)}catch(e){return!1}})),s.IsTrue=new s(n.IsTrue,((e,t)=>"TRUE"===(null==e?void 0:e.toUpperCase()))),s.IsFalse=new s(n.IsFalse,((e,t)=>"FALSE"===(null==e?void 0:e.toUpperCase()))),s.All=[s.LessThan,s.LessEqualThan,s.BiggerThan,s.BiggerEqualThan,s.Equal,s.NotEqual,s.Contains,s.NotContains,s.StartsWith,s.EndsWith,s.MatchRegex,s.NotMatchRegex,s.IsOneOf,s.NotOneOf,s.IsTrue,s.IsFalse]},2305:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEventProcessor=void 0;const n=r(5381),s=r(7584),o=r(5562),a=r(1218);t.DefaultEventProcessor=class{constructor(e){this.closed=!1;const{logger:t,flushInterval:r,maxEventsInQueue:i}=e;this.logger=t,this.flushInterval=r,this.eventQueue=new a.DefaultEventQueue(i,this.logger),this.eventDispatcher=new n.EventDispatcher(e,this.eventQueue),this.flushLoop()}flushLoop(){this.closed||setTimeout((()=>i(this,void 0,void 0,(function*(){try{yield this.flush()}catch(e){this.logger.error("Unexpected error while flushing events in event processor.",e)}this.flushLoop()}))),this.flushInterval)}flush(){const e=new s.FlushEvent;return this.record(e),e.waitForCompletion()}close(){return i(this,void 0,void 0,(function*(){if(this.closed)return;const e=new s.ShutdownEvent;this.record(e);try{yield e.waitForCompletion()}catch(e){this.logger.error("Event processor shutdown but not complete.")}this.eventQueue.close(),this.closed=!0}))}record(e){return!((0,o.isNullOrUndefined)(e)||!this.eventQueue.addEvent(e)&&(e instanceof s.FlushEvent&&e.complete(),1))}}},1218:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEventQueue=void 0,t.DefaultEventQueue=class{constructor(e,t){this.capacity=e,this.logger=t,this.closed=!1,this.events=[]}addEvent(e){return!this.closed&&(this.events.length>=this.capacity?(this.logger.warn("Events are being produced faster than they can be processed. We shouldn't see this."),!1):(this.events.push(e),!0))}clear(){this.events=[]}shift(){return this.events.shift()}close(){this.closed=!0}get eventsSnapshot(){return[...this.events]}get length(){return this.events.length}get isEmpty(){return 0===this.length}}},2580:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEventSender=void 0;const s=r(8174),o=r(8688),a=r(7449),l=n(r(1773));t.DefaultEventSender=class{constructor(e){const{sdkKey:t,eventsUri:r,platform:i}=e,{info:n,requests:s}=i;this.defaultHeaders=(0,o.defaultHeaders)(t,n),this.eventsUri=r,this.requests=s}send(e,t){return i(this,void 0,void 0,(function*(){const r={status:s.DeliveryStatus.Succeeded},i=Object.assign(Object.assign({},this.defaultHeaders),{"content-type":"application/json"});let n;try{const{status:t}=yield this.requests.fetch(this.eventsUri,{headers:i,body:e,method:"POST"});if(t>=200&&t<=299)return r;if(n=new a.UnexpectedResponseError((0,o.httpErrorMessage)({status:t,message:"some events were dropped"},"event posting")),!(0,a.isHttpRecoverable)(t))return r.status=s.DeliveryStatus.FailedAndMustShutDown,r.error=n,r}catch(e){n=e}return n&&!t?(r.status=s.DeliveryStatus.Failed,r.error=n,r):(yield(0,l.default)(),this.send(e,!1))}))}}},9657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEventSerializer=void 0;const i=r(7584);t.DefaultEventSerializer=class{serialize(e){const t=e.map((e=>e instanceof i.EvalEvent||e instanceof i.MetricEvent?e.toPayload():null)).filter((e=>null!==e));return JSON.stringify(t)}}},5381:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;const s=r(8174),o=r(1218),a=r(2580),l=r(7584),u=r(9657),c=n(r(1773));t.EventDispatcher=class{constructor(e,t){this.maxEventPerRequest=50,this.stopped=!1;const{logger:r,maxEventsInQueue:i}=e;this.logger=r,this.buffer=new o.DefaultEventQueue(i,this.logger),this.sender=new a.DefaultEventSender(e),this.serializer=new u.DefaultEventSerializer,this.dispatchLoop(t).then()}dispatchLoop(e){return i(this,void 0,void 0,(function*(){this.logger.debug("Start dispatch loop.");let t=!0;for(;t;)try{const r=e.shift();if(void 0===r){yield(0,c.default)(1e3);continue}r instanceof l.PayloadEvent?this.addEventToBuffer(r):r instanceof l.FlushEvent?yield this.triggerFlush(r):r instanceof l.ShutdownEvent&&(yield this.triggerFlush(r),this.stopped=!0,t=!1)}catch(e){this.logger.error("Unexpected error in event dispatcher.",e)}this.logger.debug("Finish dispatch loop.")}))}addEventToBuffer(e){this.stopped||(this.buffer.addEvent(e)?this.logger.debug("Added event to buffer."):this.logger.warn("Exceeded event queue capacity, event will be dropped. Increase capacity to avoid dropping events."))}triggerFlush(e){return i(this,void 0,void 0,(function*(){if(this.stopped)return void e.complete();if(this.buffer.isEmpty)return e.complete(),void this.logger.debug("Flush empty buffer.");const t=this.buffer.eventsSnapshot;this.buffer.clear();try{yield this.flushEvents(t),this.logger.debug(`${t.length} events has been flushed.`)}catch(e){this.logger.warn("Exception happened when flushing events",e)}e.complete()}))}flushEvents(e){return i(this,void 0,void 0,(function*(){const t=e.length;for(let r=0;r<t;r+=this.maxEventPerRequest){const i=Math.min(this.maxEventPerRequest,t-r),n=e.slice(r,r+i),o=this.serializer.serialize(n),{status:a}=yield this.sender.send(o,!0);a===s.DeliveryStatus.FailedAndMustShutDown&&(this.stopped=!0)}}))}}},8284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8174:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DeliveryStatus=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.FailedAndMustShutDown=2]="FailedAndMustShutDown"}(r||(t.DeliveryStatus=r={}))},407:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullEventProcessor=void 0,t.NullEventProcessor=class{flush(){return Promise.resolve()}close(){return Promise.resolve()}record(e){return!1}}},7584:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EvalEvent=t.MetricEvent=t.PayloadEvent=t.ShutdownEvent=t.FlushEvent=t.AsyncEvent=void 0;class r{constructor(){this.isCompletedPromise=new Promise((e=>{this.resolveFn=e}))}waitForCompletion(){return this.isCompletedPromise}complete(){var e;null===(e=this.resolveFn)||void 0===e||e.call(this,this)}}t.AsyncEvent=r,t.FlushEvent=class extends r{},t.ShutdownEvent=class extends r{};class i{toPayload(){}}t.PayloadEvent=i,t.MetricEvent=class extends i{constructor(e,t,r,i){super(),this.user=e,this.eventName=t,this.appType=r,this.metricValue=i,this.timestamp=(new Date).getTime()}userPayload(){return{keyId:this.user.keyId,name:this.user.name,customizedProperties:this.user.customizedProperties}}toPayload(){return{user:this.userPayload(),metrics:[{route:"index/metric",timestamp:this.timestamp,numericValue:this.metricValue,appType:this.appType,eventName:this.eventName,type:"CustomEvent"}]}}},t.EvalEvent=class extends i{constructor(e,t,r,i){super(),this.user=e,this.flagKey=t,this.variation=r,this.sendToExperiment=i,this.timestamp=(new Date).getTime()}userPayload(){return{keyId:this.user.keyId,name:this.user.name,customizedProperties:this.user.customizedProperties}}toPayload(){return{user:this.userPayload(),variations:[{featureFlagKey:this.flagKey,sendToExperiment:this.sendToExperiment,timestamp:this.timestamp,variation:this.variation}]}}}},4008:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2305),t),n(r(1218),t),n(r(2580),t),n(r(9657),t),n(r(7584),t),n(r(5381),t),n(r(8284),t),n(r(6735),t),n(r(1564),t),n(r(8174),t),n(r(407),t)},9872:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(8317),t),n(r(3758),t),n(r(9823),t),n(r(4008),t),n(r(7302),t),n(r(1045),t),n(r(9718),t),n(r(8598),t),n(r(9999),t),n(r(2710),t),n(r(1058),t),n(r(7837),t),n(r(1731),t),n(r(7449),t),n(r(70),t),n(r(5717),t),n(r(4881),t),n(r(292),t),n(r(226),t)},5768:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasicLogger=void 0;const n=i(r(3919)),s={debug:0,info:1,warn:2,error:3,none:4},o=["debug","info","warn","error","none"];class a{static get(){return new a({})}constructor(e){var t,r,i;this.logLevel=null!==(r=s[null!==(t=e.level)&&void 0!==t?t:"info"])&&void 0!==r?r:s.info,this.name=null!==(i=e.name)&&void 0!==i?i:"FeatBit",this.destination=e.destination,this.formatter=e.formatter}tryFormat(...e){var t;try{return this.formatter?null===(t=this.formatter)||void 0===t?void 0:t.call(this,...e):(0,n.default)(...e)}catch(t){return(0,n.default)(...e)}}tryWrite(e){try{this.destination(e)}catch(t){console.error(e)}}log(e,t){if(e>=this.logLevel){const r=`${o[e]}: [${this.name}]`;try{this.destination?this.tryWrite(`${r} ${this.tryFormat(...t)}`):console.error(...t)}catch(e){console.error(...t)}}}error(...e){this.log(s.error,e)}warn(...e){this.log(s.warn,e)}info(...e){this.log(s.info,e)}debug(...e){this.log(s.debug,e)}}t.BasicLogger=a},7973:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5781:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7076:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7689:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(5862),n={error:i.TypeValidators.Function,warn:i.TypeValidators.Function,info:i.TypeValidators.Function,debug:i.TypeValidators.Function};t.default=class{constructor(e,t){Object.entries(n).forEach((([t,r])=>{if(!r.is(e[t]))throw new Error(`Provided logger instance must support logger.${t}(...) method`)})),this.logger=e,this.fallback=t}log(e,t){try{this.logger[e](...t)}catch(r){this.fallback[e](...t)}}error(...e){this.log("error",e)}warn(...e){this.log("warn",e)}info(...e){this.log("info",e)}debug(...e){this.log("debug",e)}}},3919:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(5862);function n(e){if("string"==typeof e)return e;if(void 0===e)return"undefined";if(null===e)return"null";if(Object.prototype.hasOwnProperty.call(e,"toString"))try{return e.toString()}catch(e){}if("bigint"==typeof e)return`${e}n`;try{return JSON.stringify(e)}catch(e){return e instanceof TypeError&&e.message.indexOf("circular")>=0?"[Circular]":"[Not Stringifiable]"}}const s={s:e=>n(e),d:e=>function(e){return"symbol"==typeof e?"NaN":"bigint"==typeof e?`${e}n`:String(Number(e))}(e),i:e=>function(e){return"symbol"==typeof e?"NaN":"bigint"==typeof e?`${e}n`:String(parseInt(e,10))}(e),f:e=>function(e){return"symbol"==typeof e?"NaN":String(parseFloat(e))}(e),j:e=>n(e),o:e=>n(e),O:e=>n(e),c:()=>""};t.default=function(...e){var t;const r=e.shift();if(i.TypeValidators.String.is(r)){let i="",o=0;for(;o<r.length;){const n=r.charAt(o);if("%"===n){if(o+1<r.length){const n=r.charAt(o+1);if(n in s&&e.length){const r=e.shift();i+=null===(t=s[n])||void 0===t?void 0:t.call(s,r)}else i+="%"===n?"%":`%${n}`;o+=2}}else i+=n,o+=1}return e.length&&(i.length&&(i+=" "),i+=e.map(n).join(" ")),i}return e.map(n).join(" ")}},7302:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5768),t),n(r(3919),t),n(r(7973),t),n(r(5781),t),n(r(7076),t),n(r(7689),t)},8311:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,r){this.sdkKey=e,this.platform=r,this.logger=t.logger,this.offline=t.offline,this.flushInterval=t.flushInterval,this.maxEventsInQueue=t.maxEventsInQueue,this.streamingUri=t.streamingUri,this.pollingUri=t.pollingUri,this.eventsUri=t.eventsUri}}},8222:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4670:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6273:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9176:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static optionBelowMinimum(e,t,r){return`Config option "${e}" had invalid value of ${t}, using minimum of ${r} instead`}static unknownOption(e){return`Ignoring unknown config option "${e}"`}static wrongOptionType(e,t,r){return`Config option "${e}" should be of type ${t}, got ${r}, using default value`}static wrongOptionTypeBoolean(e,t){return`Config option "${e}" should be a boolean, got ${t}, converting to boolean`}static partialEndpoint(e){return`You have set custom uris without specifying the ${e} URI; connections may not work properly`}static mandatory(e){return`${e} is mandatory`}}},595:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserBuilder=void 0,t.UserBuilder=class{constructor(e){this._keyId="",this._name="",this._custom=[],this._keyId=e}name(e){return this._name=e,this}custom(e,t){var r;return null===(r=this._custom)||void 0===r||r.push({name:e,value:t}),this}build(){return{name:this._name,keyId:this._keyId,customizedProperties:this._custom}}}},5862:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypeValidators=t.KindValidator=t.DateValidator=t.UserValidator=t.NullableBoolean=t.Function=t.StringMatchingRegex=t.NumberWithMinimum=t.TypeArray=t.Type=t.FactoryOrInstance=void 0;const n=i(r(9176));class s{is(e){if(Array.isArray(e))return!1;const t=typeof e;return"function"===t||"object"===t}getType(){return"factory method or object"}}t.FactoryOrInstance=s;class o{constructor(e,t){this.typeName=e,this.typeOf=typeof t}is(e){return!Array.isArray(e)&&typeof e===this.typeOf}getType(){return this.typeName}}t.Type=o;class a{constructor(e,t){this.typeName=e,this.typeOf=typeof t}is(e){return!!Array.isArray(e)&&(!(e.length>0)||e.every((e=>typeof e===this.typeOf)))}getType(){return this.typeName}}t.TypeArray=a;class l extends o{constructor(e){super(`number with minimum value of ${e}`,0),this.min=e}is(e){return typeof e===this.typeOf&&e>=this.min}}t.NumberWithMinimum=l;class u extends o{constructor(e){super(`string matching ${e}`,""),this.expression=e}is(e){return!!e.match(this.expression)}}t.StringMatchingRegex=u;class c{is(e){return"function"==typeof e}getType(){return"function"}}t.Function=c;class d{is(e){return"boolean"==typeof e||null==e}getType(){return"boolean | undefined | null"}}t.NullableBoolean=d,t.UserValidator=class{constructor(){this.messages=[]}is(e){if("object"!=typeof e||null===e)return this.messages.push(n.default.mandatory("user")),!1;const t=e;return"string"!=typeof t.keyId||""===t.keyId.trim()?(this.messages.push(n.default.mandatory("user.keyId")),!1):"string"==typeof t.name&&""!==t.name.trim()||(this.messages.push(n.default.mandatory("user.name")),!1)}getType(){return"user"}};const h=/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d\d*)?(Z|[-+]\d\d(:\d\d)?)/;class f{is(e){return"number"==typeof e||"string"==typeof e&&h.test(e)}getType(){return"date"}}t.DateValidator=f;class v extends u{constructor(){super(/^(\w|\.|-)+$/)}is(e){return super.is(e)&&"kind"!==e}}t.KindValidator=v;class p{static createTypeArray(e,t){return new a(e,t)}static numberWithMin(e){return new l(e)}static stringMatchingRegex(e){return new u(e)}}t.TypeValidators=p,p.String=new o("string",""),p.Number=new o("number",0),p.ObjectOrFactory=new s,p.Object=new o("object",{}),p.StringArray=new a("string[]",""),p.Boolean=new o("boolean",!0),p.User=new o("object",{}),p.Function=new c,p.Date=new f,p.Kind=new v,p.NullableBoolean=new d},1045:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(8311),t),n(r(8222),t),n(r(4670),t),n(r(6273),t),n(r(8758),t),n(r(9176),t),n(r(595),t),n(r(5862),t)},5309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9938:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6510:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2833:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(5972);t.default=class{get appType(){return"Browser-Client-SDK"}platformData(){return{os:{},name:"Browser",additional:{}}}sdkData(){return{name:i.name,version:i.version,userAgentBase:this.appType}}}},9174:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(2833)),s=i(r(891)),o=i(r(9018));t.default=class{constructor(e){this.info=new n.default,this.requests=new s.default,this.webSocket=new o.default}}},891:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{fetch(e,t={}){return fetch(e,t)}}},9018:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(3046),n=r(6842),s=r(6870),o=r(1962),a=[1e3,3e3,5e3,7e3,11e3,13e3,3e4,6e4];t.default=(0,i.Emits)(class{constructor(){this.retryCounter=0,this.closed=!1,this._config={},this.emitter=new n.EventEmitter}identify(e){this._config.user=e,this.doDataSync()}connect(){var e,t,r,i;let n=this;const a=Date.now(),l=this._config.streamingUri.replace(/^http/,"ws")+`?type=client&token=${(0,s.generateConnectionToken)(this._config.sdkKey)}`;this.ws=new WebSocket(l),null===(e=n.ws)||void 0===e||e.addEventListener("open",(function(e){n._config.logger.info(`WebSocket connection succeeded, connection time: ${Date.now()-a} ms`),n.doDataSync(),n.sendPingMessage()})),null===(t=n.ws)||void 0===t||t.addEventListener("close",(function(e){n._config.logger.warn("WebSocket closed"),4003!==e.code&&n.reconnect()})),null===(r=n.ws)||void 0===r||r.addEventListener("error",(function(e){n._config.logger.debug("error")})),null===(i=n.ws)||void 0===i||i.addEventListener("message",(function(e){const t=JSON.parse(e.data);if("data-sync"===t.messageType)switch(t.data.eventType){case o.StreamResponseEventType.patch:n.emitter.emit("patch",t);break;case o.StreamResponseEventType.full:n.emitter.emit("put",t)}}))}close(){var e;this.closed=!0,null===(e=this.ws)||void 0===e||e.close(4003,"The client is closed by user"),this.ws=void 0}config(e){e.emitter&&(this.emitter=e.emitter),this._config=Object.assign({},e)}sendPingMessage(){const e={messageType:"ping",data:null};setTimeout((()=>{var t;try{(null===(t=this.ws)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?(this._config.logger.debug("sending ping"),this.ws.send(JSON.stringify(e)),this.sendPingMessage()):this._config.logger.debug(`socket closed at ${new Date}`)}catch(e){this._config.logger.debug(e)}}),this._config.pingInterval)}doDataSync(){var e,t;const r={messageType:"data-sync",data:{timestamp:this._config.getStoreTimestamp(),user:this._config.user}};try{(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?(this._config.logger.debug("requesting data"),null===(t=this.ws)||void 0===t||t.send(JSON.stringify(r))):this._config.logger.error("not requesting data because socket not open")}catch(e){this._config.logger.debug(e)}}reconnect(){if(!this.closed){this.ws=void 0;const e=a[Math.min(this.retryCounter++,a.length-1)];this._config.logger.info(`The client will try to reconnect in ${e} milliseconds.`),setTimeout((()=>{this._config.logger.info(`The client is trying to reconnect, flag evaluation results may be stale until reconnected, waited for: ${e} milliseconds`),this.connect()}),e)}}})},8322:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(4129),s=r(5768),o=r(6842),a=i(r(7689)),l=r(3046),u=i(r(9174));class c extends n.FbClientCore{constructor(e){const t=new s.BasicLogger({level:"none",destination:console.log}),r=e.logger?new a.default(e.logger,t):t,i=new o.EventEmitter(r);super(Object.assign(Object.assign({},e),{logger:r}),new u.default(Object.assign(Object.assign({},e),{logger:r})),{onError:e=>{i.listenerCount("error")&&i.emit("error",e)},onFailed:e=>{i.emit("failed",e)},onReady:()=>{i.emit("ready")},onUpdate:e=>{i.emit("update",{key:e}),i.emit(`update:${e}`,{key:e})},hasEventListeners:()=>i.eventNames().some((e=>"update"===e||"string"==typeof e&&e.startsWith("update:")))}),this.emitter=i}}t.default=(0,l.Emits)(c)},6940:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(443),n=r(5067);t.default=class{constructor(e){this.store={},this.initCalled=!1,this._user={},this.logger=e.logger}identify(e){this._user=Object.assign({},e),localStorage.setItem(i.CurrentUserStorageKey,(0,n.serializeUser)(this._user)),this.loadStoreFromStorage()}get user(){return this._user}addItem(e,t,r){let i=this.store[e.namespace];if(i||(i={},this.store[e.namespace]=i),Object.hasOwnProperty.call(i,t)){const e=i[t];(!e||e.version<r.version)&&(i[t]=r)}else i[t]=r;r.version>this.store.version&&(this.store.version=r.version),this.dumpStoreToStorage()}get(e,t){const r=this.store[e.namespace];if(r&&Object.prototype.hasOwnProperty.call(r,t)){const e=r[t];if(e)return e}return null}all(e){var t;const r={},i=null!==(t=this.store[e.namespace])&&void 0!==t?t:{};return Object.entries(i).forEach((([e,t])=>{t&&(r[e]=t)})),[r,this.store.version]}init(e,t){this.store=e,Object.keys(e).map((t=>{Object.entries(e[t]).forEach((([e,t])=>{const r=t;r.version>this.store.version&&(this.store.version=r.version)}))})),this.dumpStoreToStorage(),this.initCalled=!0,null==t||t()}upsert(e,t,r){this.addItem(e,t.key,t),null==r||r()}initialized(){return this.initCalled}close(){}getDescription(){return"local-storage-store"}get version(){return this.store.version}dumpStoreToStorage(){const e=`${i.StoreStorageKey}-${this._user.keyId}`;localStorage.setItem(e,JSON.stringify(this.store))}loadStoreFromStorage(){const e=`${i.StoreStorageKey}-${this._user.keyId}`,t=localStorage.getItem(e);let r=null;try{t&&t.trim().length>0&&(r=JSON.parse(t))}catch(t){this.logger.error(`error while loading local data store: ${e}`,t)}this.store=r||{flags:{},version:0}}}},9718:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5309),t),n(r(9938),t),n(r(6510),t),n(r(2894),t)},2894:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2093:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{}r.Flags={namespace:"flags"},t.default=r},356:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7783:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(443);t.default=class{constructor(e){this.allStores={},this.store={},this.initCalled=!1,this._user={}}identify(e){var t;this._user=Object.assign({},e),this.store=null!==(t=this.allStores[`${i.StoreStorageKey}-${this._user.keyId}`])&&void 0!==t?t:{flags:{},version:0}}get user(){return this._user}addItem(e,t,r){let n=this.store[e.namespace];if(n||(n={},this.store[e.namespace]=n),Object.hasOwnProperty.call(n,t)){const e=n[t];(!e||e.version<r.version)&&(n[t]=r)}else n[t]=r;r.version>this.store.version&&(this.store.version=r.version),this.allStores[`${i.StoreStorageKey}-${this._user.keyId}`]=Object.assign({},this.store)}get(e,t){const r=this.store[e.namespace];if(r&&Object.prototype.hasOwnProperty.call(r,t)){const e=r[t];if(e)return e}return null}all(e){var t;const r={},i=null!==(t=this.store[e.namespace])&&void 0!==t?t:{};return Object.entries(i).forEach((([e,t])=>{t&&(r[e]=t)})),[r,this.store.version]}init(e,t){this.store=e,this.store.version=0,Object.keys(e).map((t=>{Object.entries(e[t]).forEach((([e,t])=>{const r=t;r.version>this.store.version&&(this.store.version=r.version)}))})),this.allStores[`${i.StoreStorageKey}-${this._user.keyId}`]=Object.assign({},this.store),this.initCalled=!0,null==t||t()}upsert(e,t,r){this.addItem(e,t.key,t),null==r||r()}initialized(){return this.initCalled}close(){}getDescription(){return"in-memory-store"}get version(){return this.store.version}}},8598:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2093),t),n(r(356),t),n(r(7783),t),n(r(4426),t),n(r(443),t)},4426:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializePatch=t.deserializeAll=void 0;const n=i(r(2093));t.deserializeAll=function(e){const t={[n.default.Flags.namespace]:{}};return(null==e?void 0:e.length)&&(t[n.default.Flags.namespace]=e.reduce(((e,t)=>(e[t.id]=Object.assign(Object.assign({},t),{version:t.timestamp||0,key:t.id,variations:t.variationOptions}),e)),{})),t},t.deserializePatch=function(e){return[...(null==e?void 0:e.map((e=>({data:Object.assign(Object.assign({},e),{version:e.timestamp,key:e.id,variations:e.variationOptions}),kind:n.default.Flags}))))||[]]}},443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentUserStorageKey=t.StoreStorageKey=void 0,t.StoreStorageKey="fb-datastore",t.CurrentUserStorageKey="fb-user"},3046:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Emits=void 0,t.Emits=function(e){return class extends e{on(e,t,r){return this.emitter.on(e,t,r),this}addListener(e,t,r){return this.emitter.addListener(e,t,r),this}once(e,t,r){return this.emitter.once(e,t,r),this}removeListener(e,t,r){return this.emitter.removeListener(e,t,r),this}off(e,t,r){return this.emitter.off(e,t,r),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}listeners(e){return this.emitter.listeners(e)}emit(e,...t){return this.emitter.emit(e,t),this}listenerCount(e){return this.emitter.listenerCount(e)}prependListener(e,t,r){return this.emitter.prependListener(e,t,r),this}prependOnceListener(e,t,r){return this.emitter.prependOnceListener(e,t,r),this}eventNames(){return this.emitter.eventNames()}maybeReportError(e){return this.emitter.maybeReportError(e),this}}}},6842:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.EventEmitter=class{constructor(e){this.logger=e,this.events={}}listeningTo(e){return!!this.events[e]}on(e,t,r){return this.events[e]=this.events[e]||[],this.events[e]=this.events[e].concat({handler:t,context:r}),this}addListener(e,t,r){return this.on(e,t,r)}once(e,t,r){const i=(...n)=>{this.off(e,i,r),t.apply(r,n)};return this.on(e,i,r)}off(e,t,r){if(!this.events[e])return this;for(let i=0;i<this.events[e].length;i++)this.events[e][i].handler===t&&this.events[e][i].context===r&&(this.events[e]=this.events[e].slice(0,i).concat(this.events[e].slice(i+1)));return this}removeListener(e,t,r){return this.off(e,t,r)}removeAllListeners(e){return e?delete this.events[e]:this.events={},this}listeners(e){return this.events[e]?this.events[e].map((e=>e.handler)):[]}emit(e,...t){if(!this.events[e])return this;const r=[...this.events[e]];for(let e=0;e<r.length;e++)r[e].handler.apply(r[e].context,Array.prototype.slice.call(arguments,1));return this}listenerCount(e){return this.events[e]?this.events[e].length:0}prependListener(e,t,r){return this.events[e]=this.events[e]||[],this.events[e]=[{handler:t,context:r},...this.events[e]],this}prependOnceListener(e,t,r){const i=(...n)=>{this.off(e,i,r),t.apply(r,n)};return this.prependListener(e,i,r)}eventNames(){return Object.keys(this.events)}maybeReportError(e){var t;return e?(this.listeningTo("error")?this.emit("error",e):null===(t=this.logger)||void 0===t||t.error(e),this):this}}},1325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=void 0;const i=r(5562);class n{static fromString(e){let t="";const r=e.match(n.patternWithFlags);return r&&(e=r[1],t=r[2]),new RegExp(e,t)}static isNullOrWhiteSpace(e){return(0,i.isNullOrUndefined)(e)||!e.replace(n.whiteSpaceRegex,"").length}}t.Regex=n,n.patternWithFlags=/\/(.*)\/([a-z]*)/i,n.whiteSpaceRegex=/\s/g},1142:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueConverters=void 0;class r{static bool(e){return"TRUE"===(null==e?void 0:e.toUpperCase())?r.success(!0):"FALSE"===(null==e?void 0:e.toUpperCase())?r.success(!1):r.error()}static number(e){const t=Number(e);return Number.isNaN(t)?r.error():r.success(t)}static string(e){return r.success(e)}static json(e){try{const t=JSON.parse(e);return r.success(t)}catch(e){return r.error()}}static success(e){return{isSucceeded:!0,value:e}}static error(){return{isSucceeded:!1}}}t.ValueConverters=r},7266:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1624:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.canonicalizeUri=void 0,t.canonicalizeUri=function(e){return e.replace(/\/+$/,"")}},8688:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpErrorMessage=t.defaultHeaders=void 0,t.defaultHeaders=function(e,t){const{userAgentBase:r,version:i}=t.sdkData();return{"Content-Type":"application/json","User-Agent":`${null!=r?r:t.appType}/${i}`,Authorization:e}},t.httpErrorMessage=function(e,t,r){let i;return i=e.status?`error ${e.status}${401===e.status?" (invalid SDK key)":""}`:`I/O error (${e.message||e})`,`Received ${i} for ${t} - ${null!=r?r:"giving up permanently"}`}},2710:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5562),t),n(r(1773),t),n(r(1142),t),n(r(7266),t)},5562:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNullOrUndefined=void 0,t.isNullOrUndefined=function(e){return null==e}},5067:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUser=void 0,t.serializeUser=function(e){var t;return e?`${e.keyId},${e.name},${null===(t=e.customizedProperties)||void 0===t?void 0:t.sort(((e,t)=>{const r=e.name.toLowerCase(),i=t.name.toLowerCase();return r<i?-1:r>i?1:0})).map((e=>`${e.name}:${e.value}`)).join(",")}`:""}},1773:function(e,t){var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=1e3)=>r(void 0,void 0,void 0,(function*(){return new Promise((t=>{setTimeout(t,e)}))}))},5972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.name=t.version=void 0,t.version="1.0.0",t.name="@featbit/js-client-sdk"}},t={};return function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}(9872)})()));
//# sourceMappingURL=featbit-js-client-sdk-1.0.0.js.map